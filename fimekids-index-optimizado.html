<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FimeKids - ¡Juega y Aprende!</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            background: linear-gradient(135deg, #ff6b9d 0%, #c44569 25%, #f8b500 50%, #ff9ff3 75%, #54a0ff 100%);
            font-family: 'Comic Sans MS', cursive, sans-serif;
            min-height: 100vh;
            overflow-x: hidden;
        }
        
        /* Animaciones de fondo */
        .floating-shapes {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1;
        }
        
        .shape {
            position: absolute;
            animation: float 6s ease-in-out infinite;
        }
        
        .shape:nth-child(1) { top: 10%; left: 10%; animation-delay: 0s; }
        .shape:nth-child(2) { top: 20%; left: 80%; animation-delay: 1s; }
        .shape:nth-child(3) { top: 60%; left: 20%; animation-delay: 2s; }
        .shape:nth-child(4) { top: 80%; left: 70%; animation-delay: 3s; }
        .shape:nth-child(5) { top: 40%; left: 50%; animation-delay: 4s; }
        
        @keyframes float {
            0%, 100% { transform: translateY(0px) rotate(0deg); }
            50% { transform: translateY(-20px) rotate(180deg); }
        }
        
        .container {
            position: relative;
            z-index: 2;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            text-align: center;
        }
        
        .header {
            background: rgba(255, 255, 255, 0.9);
            border-radius: 30px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            border: 5px solid #ff6b9d;
        }
        
        .header h1 {
            font-size: 4em;
            color: #ff6b9d;
            text-shadow: 3px 3px 0px #fff, 6px 6px 0px #ff6b9d;
            margin-bottom: 10px;
            animation: bounce 2s infinite;
        }
        
        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
            40% { transform: translateY(-10px); }
            60% { transform: translateY(-5px); }
        }
        
        .header p {
            font-size: 1.5em;
            color: #c44569;
            font-weight: bold;
        }
        
        .games-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 30px;
            margin: 40px 0;
        }
        
        .game-card {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 25px;
            padding: 30px 20px;
            text-decoration: none;
            transition: all 0.3s ease;
            border: 4px solid transparent;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
            position: relative;
            overflow: hidden;
        }
        
        .game-card:hover {
            transform: translateY(-10px) scale(1.05);
            border-color: #ff6b9d;
            box-shadow: 0 15px 40px rgba(255, 107, 157, 0.3);
        }
        
        .game-icon {
            font-size: 5em;
            margin-bottom: 15px;
            display: block;
            animation: wiggle 2s ease-in-out infinite;
        }
        
        @keyframes wiggle {
            0%, 7% { transform: rotateZ(0); }
            15% { transform: rotateZ(-15deg); }
            20% { transform: rotateZ(10deg); }
            25% { transform: rotateZ(-10deg); }
            30% { transform: rotateZ(6deg); }
            35% { transform: rotateZ(-4deg); }
            40%, 100% { transform: rotateZ(0); }
        }
        
        .game-card:nth-child(1) .game-icon { animation-delay: 0s; }
        .game-card:nth-child(2) .game-icon { animation-delay: 0.2s; }
        .game-card:nth-child(3) .game-icon { animation-delay: 0.4s; }
        .game-card:nth-child(4) .game-icon { animation-delay: 0.6s; }
        .game-card:nth-child(5) .game-icon { animation-delay: 0.8s; }
        
        .game-title {
            font-size: 1.8em;
            color: #c44569;
            font-weight: bold;
            margin-bottom: 10px;
            text-shadow: 2px 2px 0px #fff;
        }
        
        .game-description {
            font-size: 1.1em;
            color: #666;
            line-height: 1.4;
        }
        
        .ai-assistant {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 25px;
            padding: 30px;
            margin: 40px 0;
            border: 4px solid #54a0ff;
            box-shadow: 0 10px 30px rgba(84, 160, 255, 0.2);
        }
        
        .ai-assistant h3 {
            font-size: 2em;
            color: #54a0ff;
            margin-bottom: 20px;
            text-shadow: 2px 2px 0px #fff;
        }
        
        .ai-response {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 20px;
            margin: 20px 0;
            font-size: 1.2em;
            color: #333;
            border-left: 5px solid #54a0ff;
        }
        
        .voice-button {
            background: linear-gradient(45deg, #ff6b9d, #c44569);
            color: white;
            border: none;
            padding: 20px 40px;
            border-radius: 30px;
            font-size: 1.3em;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            margin: 10px;
            box-shadow: 0 5px 15px rgba(255, 107, 157, 0.3);
        }
        
        .voice-button:hover {
            background: linear-gradient(45deg, #c44569, #ff6b9d);
            transform: scale(1.1);
            box-shadow: 0 8px 25px rgba(255, 107, 157, 0.5);
        }
        
        .back-button {
            background: linear-gradient(45deg, #f8b500, #ff9f43);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 25px;
            font-size: 1.2em;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-block;
            margin: 20px;
            box-shadow: 0 5px 15px rgba(248, 181, 0, 0.3);
        }
        
        .back-button:hover {
            background: linear-gradient(45deg, #ff9f43, #f8b500);
            transform: scale(1.05);
            box-shadow: 0 8px 25px rgba(248, 181, 0, 0.5);
        }
        
        /* Efectos especiales */
        .sparkle {
            position: absolute;
            width: 10px;
            height: 10px;
            background: #ffd700;
            border-radius: 50%;
            animation: sparkle 1.5s ease-in-out infinite;
        }
        
        @keyframes sparkle {
            0%, 100% { opacity: 0; transform: scale(0); }
            50% { opacity: 1; transform: scale(1); }
        }
        
        .sparkle:nth-child(1) { top: 20%; left: 20%; animation-delay: 0s; }
        .sparkle:nth-child(2) { top: 30%; right: 20%; animation-delay: 0.3s; }
        .sparkle:nth-child(3) { bottom: 30%; left: 30%; animation-delay: 0.6s; }
        .sparkle:nth-child(4) { bottom: 20%; right: 30%; animation-delay: 0.9s; }
        
        /* Responsive */
        @media (max-width: 768px) {
            .header h1 { font-size: 2.5em; }
            .games-container { grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); }
            .game-icon { font-size: 3.5em; }
            .game-title { font-size: 1.4em; }
        }
    </style>
</head>
<body>
    <!-- Formas flotantes de fondo -->
    <div class="floating-shapes">
        <div class="shape" style="font-size: 3em; color: rgba(255, 255, 255, 0.3);">🌟</div>
        <div class="shape" style="font-size: 2.5em; color: rgba(255, 255, 255, 0.3);">🎈</div>
        <div class="shape" style="font-size: 3.5em; color: rgba(255, 255, 255, 0.3);">🎪</div>
        <div class="shape" style="font-size: 2em; color: rgba(255, 255, 255, 0.3);">🎨</div>
        <div class="shape" style="font-size: 4em; color: rgba(255, 255, 255, 0.3);">🎭</div>
    </div>
    
    <div class="container">
        <div class="header">
            <h1>👶 FimeKids</h1>
            <p>¡Juega y Aprende!</p>
        </div>
        
        <div class="games-container">
            <a href="juegos/colores/" class="game-card">
                <span class="sparkle"></span>
                <span class="sparkle"></span>
                <span class="sparkle"></span>
                <span class="sparkle"></span>
                <div class="game-icon">🎨</div>
                <div class="game-title">Colores</div>
                <div class="game-description">¡Aprende los colores!</div>
            </a>
            
            <a href="juegos/numeros/" class="game-card">
                <span class="sparkle"></span>
                <span class="sparkle"></span>
                <span class="sparkle"></span>
                <span class="sparkle"></span>
                <div class="game-icon">🔢</div>
                <div class="game-title">Números</div>
                <div class="game-description">¡Cuenta y juega!</div>
            </a>
            
            <a href="juegos/formas/" class="game-card">
                <span class="sparkle"></span>
                <span class="sparkle"></span>
                <span class="sparkle"></span>
                <span class="sparkle"></span>
                <div class="game-icon">🔷</div>
                <div class="game-title">Formas</div>
                <div class="game-description">¡Dibuja formas!</div>
            </a>
            
            <a href="juegos/idiomas/" class="game-card">
                <span class="sparkle"></span>
                <span class="sparkle"></span>
                <span class="sparkle"></span>
                <span class="sparkle"></span>
                <div class="game-icon">🌍</div>
                <div class="game-title">Idiomas</div>
                <div class="game-description">¡Habla inglés!</div>
            </a>
            
            <a href="juegos/animales/" class="game-card">
                <span class="sparkle"></span>
                <span class="sparkle"></span>
                <span class="sparkle"></span>
                <span class="sparkle"></span>
                <div class="game-icon">🐾</div>
                <div class="game-title">Animales</div>
                <div class="game-description">¡Conoce animales!</div>
            </a>
        </div>
        
        <div class="ai-assistant">
            <h3>🤖 Asistente Amigo</h3>
            <div class="ai-response" id="aiResponse">
                ¡Hola! Soy tu amigo robot. ¡Hazme una pregunta!
            </div>
            <button class="voice-button" onclick="startAIConversationOptimizada()">🗣️ Hablar</button>
        </div>
        
        <a href="../index.html" class="back-button">🏠 Volver</a>
    </div>
    
    <script>
        // Función de síntesis de voz SUPER ANIMADA
        function speak(text) {
            if ('speechSynthesis' in window) {
                const utterance = new SpeechSynthesisUtterance(text);
                utterance.lang = 'es-ES';
                utterance.rate = 0.6; // Más lento para niños
                utterance.pitch = 1.4; // Más agudo y divertido
                utterance.volume = 1.0;
                speechSynthesis.speak(utterance);
            }
        }
        
        // Mensajes animados y divertidos
        const mensajesAnimados = [
            "¡Hola pequeñín! ¡Bienvenido a FimeKids!",
            "¡Qué emoción! ¡Vamos a jugar y aprender!",
            "¡Eres súper inteligente! ¡Vamos a divertirnos!",
            "¡Wow! ¡Qué genial que estés aquí!",
            "¡Hola campeón! ¡Listo para jugar?",
            "¡Qué alegría verte! ¡Vamos a aprender juntos!",
            "¡Eres increíble! ¡Empecemos a jugar!",
            "¡Hola superhéroe! ¡Vamos a la aventura!"
        ];
        
        const mensajesCorrectos = [
            "¡SÚPER BIEN! ¡Eres un genio!",
            "¡INCREÍBLE! ¡Lo hiciste perfecto!",
            "¡FANTÁSTICO! ¡Eres muy inteligente!",
            "¡EXCELENTE! ¡Qué bien lo hiciste!",
            "¡MARAVILLOSO! ¡Eres un campeón!",
            "¡PERFECTO! ¡Lo lograste!",
            "¡GENIAL! ¡Eres súper listo!",
            "¡BRAVO! ¡Qué inteligente eres!"
        ];
        
        const mensajesIncorrectos = [
            "¡No te preocupes! ¡Inténtalo de nuevo!",
            "¡Casi lo logras! ¡Sigue intentando!",
            "¡No pasa nada! ¡Tú puedes!",
            "¡Sigue así! ¡Lo vas a lograr!",
            "¡Muy bien! ¡Sigue practicando!",
            "¡Eres valiente! ¡Inténtalo otra vez!",
            "¡No te rindas! ¡Tú puedes hacerlo!",
            "¡Sigue intentando! ¡Eres genial!"
        ];
        
        // Función para obtener mensaje aleatorio
        function getRandomMessage(messages) {
            return messages[Math.floor(Math.random() * messages.length)];
        }
        
        // Conversación con IA SUPER ANIMADA
        function startAIConversationOptimizada() {
            if ('webkitSpeechRecognition' in window) {
                const recognition = new webkitSpeechRecognition();
                recognition.lang = 'es-ES';
                recognition.continuous = false;
                recognition.interimResults = false;
                
                recognition.onstart = function() {
                    const mensaje = getRandomMessage([
                        "🎤 ¡Te estoy escuchando! ¡Habla fuerte!",
                        "🎤 ¡Dime algo! ¡Te escucho!",
                        "🎤 ¡Habla! ¡Estoy aquí para ti!",
                        "🎤 ¡Vamos! ¡Dime qué quieres saber!"
                    ]);
                    document.getElementById('aiResponse').textContent = mensaje;
                    speak(mensaje);
                };
                
                recognition.onresult = function(event) {
                    const transcript = event.results[0][0].transcript;
                    const mensajeEscuchado = getRandomMessage([
                        `¡Wow! Dijiste: "${transcript}"`,
                        `¡Genial! Escuché: "${transcript}"`,
                        `¡Qué bien! Me dijiste: "${transcript}"`,
                        `¡Perfecto! Entendí: "${transcript}"`
                    ]);
                    document.getElementById('aiResponse').textContent = mensajeEscuchado;
                    speak(mensajeEscuchado);
                    
                    // Respuestas infantiles y animadas
                    let response = getRandomMessage([
                        "¡Qué pregunta tan genial! ",
                        "¡Me encanta tu pregunta! ",
                        "¡Eres muy curioso! ",
                        "¡Qué inteligente eres! "
                    ]);
                    
                    if (transcript.includes('color')) {
                        response += getRandomMessage([
                            "Los colores son súper divertidos. ¡Rojo como una manzana, azul como el cielo, amarillo como el sol!",
                            "¡Los colores son mágicos! ¡Rojo, azul, verde, amarillo! ¡Todos son hermosos!",
                            "¡Me encantan los colores! ¡Son como un arcoíris de diversión!"
                        ]);
                    } else if (transcript.includes('número')) {
                        response += getRandomMessage([
                            "Los números son súper útiles. ¡1, 2, 3, 4, 5! ¡Nos ayudan a contar todo!",
                            "¡Los números son geniales! ¡Con ellos podemos contar juguetes, dulces, y todo lo que queramos!",
                            "¡Los números son nuestros amigos! ¡1, 2, 3... ¡Vamos a contar juntos!"
                        ]);
                    } else if (transcript.includes('animal')) {
                        response += getRandomMessage([
                            "¡Los animales son nuestros amigos! ¡Miau, guau, muuu! ¡Todos tienen sonidos diferentes!",
                            "¡Me encantan los animales! ¡Perros, gatos, vacas, todos son súper divertidos!",
                            "¡Los animales son increíbles! ¡Cada uno es especial y único!"
                        ]);
                    } else {
                        response += getRandomMessage([
                            "¡Esa es una pregunta súper interesante! ¡Sigue preguntando!",
                            "¡Qué pregunta tan genial! ¡Eres muy inteligente!",
                            "¡Me encanta tu curiosidad! ¡Sigue aprendiendo!",
                            "¡Eres increíble! ¡Sigue haciendo preguntas!"
                        ]);
                    }
                    
                    setTimeout(() => {
                        document.getElementById('aiResponse').textContent = response;
                        speak(response);
                    }, 2000);
                };
                
                recognition.onerror = function(event) {
                    const mensajeError = getRandomMessage([
                        "¡Ups! No te escuché bien. ¡Habla más fuerte!",
                        "¡Oh no! No pude escucharte. ¡Intenta de nuevo!",
                        "¡Ay! No te entendí. ¡Repite por favor!",
                        "¡Oops! No escuché bien. ¡Habla más claro!"
                    ]);
                    document.getElementById('aiResponse').textContent = mensajeError;
                    speak(mensajeError);
                };
                
                recognition.start();
            } else {
                const mensajeNoSoporte = getRandomMessage([
                    "¡Ay! Tu navegador no puede escucharme. ¡Qué pena!",
                    "¡Oh no! No puedo escucharte en este navegador. ¡Intenta con otro!",
                    "¡Ups! No puedo escucharte aquí. ¡Prueba con Chrome o Firefox!"
                ]);
                document.getElementById('aiResponse').textContent = mensajeNoSoporte;
                speak(mensajeNoSoporte);
            }
        }
        
        // Efectos de sonido mejorados
        function playClickSound() {
            const audioContext = new (window.AudioContext || window.webkitAudioContext)();
            const oscillator = audioContext.createOscillator();
            const gainNode = audioContext.createGain();
            
            oscillator.connect(gainNode);
            gainNode.connect(audioContext.destination);
            
            oscillator.frequency.setValueAtTime(800, audioContext.currentTime);
            gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);
            gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.1);
            
            oscillator.start(audioContext.currentTime);
            oscillator.stop(audioContext.currentTime + 0.1);
        }
        
        // Efectos de partículas mejorados
        function createParticles(x, y) {
            for (let i = 0; i < 15; i++) {
                const particle = document.createElement('div');
                particle.style.position = 'fixed';
                particle.style.left = x + 'px';
                particle.style.top = y + 'px';
                particle.style.width = '15px';
                particle.style.height = '15px';
                particle.style.background = `hsl(${Math.random() * 360}, 100%, 50%)`;
                particle.style.borderRadius = '50%';
                particle.style.pointerEvents = 'none';
                particle.style.zIndex = '1000';
                particle.style.boxShadow = '0 0 10px currentColor';
                
                document.body.appendChild(particle);
                
                const angle = (Math.PI * 2 * i) / 15;
                const velocity = 150 + Math.random() * 100;
                const vx = Math.cos(angle) * velocity;
                const vy = Math.sin(angle) * velocity;
                
                particle.animate([
                    { transform: 'translate(0, 0) scale(1)', opacity: 1 },
                    { transform: `translate(${vx}px, ${vy}px) scale(0)`, opacity: 0 }
                ], {
                    duration: 1200,
                    easing: 'ease-out'
                }).onfinish = () => {
                    particle.remove();
                };
            }
        }
        
        // Inicialización con mensajes animados
        document.addEventListener('DOMContentLoaded', function() {
            // Mensaje de bienvenida súper animado
            setTimeout(() => {
                const mensajeBienvenida = getRandomMessage(mensajesAnimados);
                speak(mensajeBienvenida);
            }, 1000);
            
            // Agregar efectos de sonido a los botones
            const buttons = document.querySelectorAll('.game-card, .voice-button, .back-button');
            buttons.forEach(button => {
                button.addEventListener('click', playClickSound);
            });
            
            // Efectos de partículas al hacer clic
            document.addEventListener('click', function(e) {
                createParticles(e.clientX, e.clientY);
            });
            
            // Mensajes aleatorios cada 30 segundos
            setInterval(() => {
                const mensajeAleatorio = getRandomMessage([
                    "¡Recuerda que puedes hacer clic en cualquier juego!",
                    "¡Soy tu amigo robot! ¡Háblame cuando quieras!",
                    "¡Los juegos son súper divertidos! ¡Pruébalos todos!",
                    "¡Eres muy inteligente! ¡Sigue jugando y aprendiendo!"
                ]);
                speak(mensajeAleatorio);
            }, 30000);
        });
    </script>

        // IA OPTIMIZADA - FUNCION MEJORADA
        function startAIConversationOptimizada() {
            console.log('Iniciando IA optimizada...');
            
            if (!('webkitSpeechRecognition' in window)) {
                alert('Tu navegador no soporta reconocimiento de voz. Usa Chrome o Firefox.');
                return;
            }
            
            const recognition = new webkitSpeechRecognition();
            recognition.lang = 'es-ES';
            recognition.continuous = false;
            recognition.interimResults = false;
            recognition.maxAlternatives = 1;
            
            // Mensajes animados
            const mensajesAnimados = [
                "Â¡Hola pequeÃ±Ã­n! Â¡Bienvenido a FimeKids!",
                "Â¡QuÃ© emociÃ³n! Â¡Vamos a jugar y aprender!",
                "Â¡Eres sÃºper inteligente! Â¡Vamos a divertirnos!",
                "Â¡Wow! Â¡QuÃ© genial que estÃ©s aquÃ­!",
                "Â¡Hola campeÃ³n! Â¡Listo para jugar?",
                "Â¡QuÃ© alegrÃ­a verte! Â¡Vamos a aprender juntos!",
                "Â¡Eres increÃ­ble! Â¡Empecemos a jugar!",
                "Â¡Hola superhÃ©roe! Â¡Vamos a la aventura!"
            ];
            
            function getRandomMessage(messages) {
                return messages[Math.floor(Math.random() * messages.length)];
            }
            
            function speak(text) {
                if ('speechSynthesis' in window) {
                    const utterance = new SpeechSynthesisUtterance(text);
                    utterance.lang = 'es-ES';
                    utterance.rate = 0.6;
                    utterance.pitch = 1.4;
                    utterance.volume = 1.0;
                    speechSynthesis.speak(utterance);
                }
            }
            
            recognition.onstart = function() {
                console.log('Reconocimiento iniciado');
                const mensaje = getRandomMessage([
                    "Te estoy escuchando! Habla fuerte!",
                    "Dime algo! Te escucho!",
                    "Habla! Estoy aquÃ­ para ti!",
                    "Vamos! Dime quÃ© quieres saber!"
                ]);
                document.getElementById('aiResponse').textContent = mensaje;
                speak(mensaje);
            };
            
            recognition.onresult = function(event) {
                console.log('Resultado recibido:', event.results[0][0].transcript);
                const transcript = event.results[0][0].transcript;
                
                const mensajeEscuchado = getRandomMessage([
                    "Wow! Dijiste: " + transcript,
                    "Genial! EscuchÃ©: " + transcript,
                    "QuÃ© bien! Me dijiste: " + transcript,
                    "Perfecto! EntendÃ­: " + transcript
                ]);
                document.getElementById('aiResponse').textContent = mensajeEscuchado;
                speak(mensajeEscuchado);
                
                // Respuestas inteligentes
                let response = getRandomMessage([
                    "QuÃ© pregunta tan genial! ",
                    "Me encanta tu pregunta! ",
                    "Eres muy curioso! ",
                    "QuÃ© inteligente eres! "
                ]);
                
                if (transcript.toLowerCase().includes('color')) {
                    response += getRandomMessage([
                        "Los colores son sÃºper divertidos. Rojo como una manzana, azul como el cielo, amarillo como el sol!",
                        "Los colores son mÃ¡gicos! Rojo, azul, verde, amarillo! Todos son hermosos!",
                        "Me encantan los colores! Son como un arcoÃ­ris de diversiÃ³n!"
                    ]);
                } else if (transcript.toLowerCase().includes('nÃºmero') || transcript.toLowerCase().includes('numero')) {
                    response += getRandomMessage([
                        "Los nÃºmeros son sÃºper Ãºtiles. 1, 2, 3, 4, 5! Nos ayudan a contar todo!",
                        "Los nÃºmeros son geniales! Con ellos podemos contar juguetes, dulces, y todo lo que queramos!",
                        "Los nÃºmeros son nuestros amigos! 1, 2, 3... Vamos a contar juntos!"
                    ]);
                } else if (transcript.toLowerCase().includes('animal')) {
                    response += getRandomMessage([
                        "Los animales son nuestros amigos! Miau, guau, muuu! Todos tienen sonidos diferentes!",
                        "Me encantan los animales! Perros, gatos, vacas, todos son sÃºper divertidos!",
                        "Los animales son increÃ­bles! Cada uno es especial y Ãºnico!"
                    ]);
                } else {
                    response += getRandomMessage([
                        "Esa es una pregunta sÃºper interesante! Sigue preguntando!",
                        "QuÃ© pregunta tan genial! Eres muy inteligente!",
                        "Me encanta tu curiosidad! Sigue aprendiendo!",
                        "Eres increÃ­ble! Sigue haciendo preguntas!"
                    ]);
                }
                
                setTimeout(() => {
                    document.getElementById('aiResponse').textContent = response;
                    speak(response);
                }, 2000);
            };
            
            recognition.onerror = function(event) {
                console.error('Error en reconocimiento:', event.error);
                const mensajeError = getRandomMessage([
                    "Ups! No te escuchÃ© bien. Habla mÃ¡s fuerte!",
                    "Oh no! No pude escucharte. Intenta de nuevo!",
                    "Ay! No te entendÃ­. Repite por favor!",
                    "Oops! No escuchÃ© bien. Habla mÃ¡s claro!"
                ]);
                document.getElementById('aiResponse').textContent = mensajeError;
                speak(mensajeError);
            };
            
            recognition.onend = function() {
                console.log('Reconocimiento terminado');
            };
            
            recognition.start();
        }
</body>
</html>

